<!DOCTYPE html>
<html lang="en" translate="no">
<head>
    <meta charset="utf-8"/>
    <link rel="shortcut icon" id="favicon" href="./favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="theme-color" content="#000000"/>
    <meta
            name="description"
            content="Поиск вакансий в СПб"
    />
    <title>Работа СПб</title>
</head>
<body>
<div id="root">
    <script src="https://securepay.tinkoff.ru/html/payForm/js/tinkoff_v2.js"></script>
    <script type="text/javascript">
        function tinkoffPay(form) {
            const name = form.description.value.trim()
            const amount = +(form.amount.value.replace(/\D/g, ""))
            const email = form.email.value.trim()
            const phone = form.phone.value.trim()

            form.amount.value = String(amount)
            form.email.value = email
            form.phone.value = phone

            let quantity = 1;
            if (amount) {
                form.receipt.value = JSON.stringify({
                    "Email": email,
                    "Phone": phone,
                    "EmailCompany": "test@tinkoff.ru",
                    "Taxation": "usn_income",
                    "Items": [
                        {
                            "Name": name,
                            "Price": amount * 100,
                            "Quantity": quantity,
                            "Amount": amount * 100 * quantity,
                            "PaymentMethod": "full_payment",
                            "PaymentObject": "service",
                            "Tax": "none",
                        }
                    ],
                });
                pay(form);
            } else alert("Не все обязательные поля заполнены либо заполнены неверно");
            return false;
        }
    </script>
</div>
<script type="text/javascript">
    VK.init({
        apiId: 51604244
    });
</script>
</body>
</html>
